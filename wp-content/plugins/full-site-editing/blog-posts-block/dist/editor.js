!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=33)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){!function(){e.exports=this.wp.htmlEntities}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t,n){var o=n(3);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var o=n(28),c=n(4);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var o=n(29);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e){e.exports=JSON.parse('{"name":"homepage-articles","category":"newspack","attributes":{"className":{"type":"string","default":""},"showExcerpt":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showImage":{"type":"boolean","default":true},"showCaption":{"type":"boolean","default":false},"imageShape":{"type":"string","default":"landscape"},"minHeight":{"type":"integer","default":0},"moreButton":{"type":"boolean","default":false},"moreButtonText":{"type":"string","default":""},"showAuthor":{"type":"boolean","default":true},"showAvatar":{"type":"boolean","default":true},"showCategory":{"type":"boolean","default":false},"postLayout":{"type":"string","default":"list"},"columns":{"type":"integer","default":3},"postsToShow":{"type":"integer","default":3},"mediaPosition":{"type":"string","default":"top"},"authors":{"type":"array","default":[],"items":{"type":"integer"}},"categories":{"type":"array","default":[],"items":{"type":"integer"}},"tags":{"type":"array","default":[],"items":{"type":"integer"}},"tagExclusions":{"type":"array","default":[],"items":{"type":"integer"}},"specificPosts":{"type":"array","default":[],"items":{"type":"integer"}},"typeScale":{"type":"integer","default":4},"imageScale":{"type":"integer","default":3},"mobileStack":{"type":"boolean","default":false},"sectionHeader":{"type":"string","default":""},"specificMode":{"type":"boolean","default":false},"textColor":{"type":"string","default":""},"customTextColor":{"type":"string","default":""},"singleMode":{"type":"boolean","default":false},"showSubtitle":{"type":"boolean","default":false}}}')},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){!function(){e.exports=this.wp.hooks}()},function(e,t,n){var o=n(25),c=n(26),r=n(27);e.exports=function(e){return o(e)||c(e)||r()}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t){!function(){e.exports=this.wp.date}()},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var o;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function c(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o)&&o.length){var a=c.apply(null,o);a&&e.push(a)}else if("object"===r)for(var i in o)n.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):void 0===(o=function(){return c}.apply(t,[]))||(e.exports=o)}()},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(9),c=n.n(o),r=n(17),a=n(1),i=n(18),s=n(0),l=n(2),u=n(19),p=n.n(u),f=n(12),d=n.n(f),g=n(20),h=n.n(g),b=n(13),m=n.n(b),O=n(14),j=n.n(O),y=n(4),w=n.n(y),_=n(15),v=n.n(_),k=n(3),S=n.n(k),E=n(22),C=n.n(E),P=n(6),x=n.n(P),A=n(7),T=n(5),B=n(11),I=(n(30),function(e){function t(e){var n;return d()(this,t),n=m()(this,j()(t).call(this,e)),S()(w()(n),"isFetchingInfoOnLoad",(function(){var e=n.props,t=e.tokens,o=e.fetchSavedInfo;return Boolean(t.length&&o)})),n.state={suggestions:[],validValues:{},loading:n.isFetchingInfoOnLoad()},n.debouncedUpdateSuggestions=Object(B.debounce)(n.updateSuggestions,500),n}return v()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;if(this.isFetchingInfoOnLoad()){var t=this.props,n=t.tokens;(0,t.fetchSavedInfo)(n).then((function(t){var n=e.state.validValues;t.forEach((function(e){n[e.value]=e.label})),e.setState({validValues:n,loading:!1})}))}}},{key:"componentWillUnmount",value:function(){delete this.suggestionsRequest,this.debouncedUpdateSuggestions.cancel()}},{key:"getLabelsForValues",value:function(e){var t=this.state.validValues;return e.reduce((function(e,n){return t[n]?[].concat(p()(e),[t[n]]):e}),[])}},{key:"getValuesForLabels",value:function(e){var t=this.state.validValues;return e.map((function(e){return Object.keys(t).find((function(n){return t[n]===e}))}))}},{key:"updateSuggestions",value:function(e){var t=this,n=this.props.fetchSuggestions;n&&this.setState({loading:!0},(function(){var o=n(e);o.then((function(e){if(t.suggestionsRequest===o){var n=t.state.validValues,c=[];e.forEach((function(e){c.push(e.label),n[e.value]=e.label})),t.setState({suggestions:c,validValues:n,loading:!1})}})).catch((function(){t.suggestionsRequest===o&&t.setState({loading:!1})})),t.suggestionsRequest=o}))}},{key:"handleOnChange",value:function(e){(0,this.props.onChange)(this.getValuesForLabels(e))}},{key:"getTokens",value:function(){var e=this.props.tokens;return this.getLabelsForValues(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.help,o=t.label,c=void 0===o?"":o,r=this.state,a=r.suggestions,i=r.loading;return Object(s.createElement)("div",{className:"autocomplete-tokenfield"},Object(s.createElement)(l.FormTokenField,{value:this.getTokens(),suggestions:a,onChange:function(t){return e.handleOnChange(t)},onInputChange:function(t){return e.debouncedUpdateSuggestions(t)},label:c}),i&&Object(s.createElement)(l.Spinner,null),n&&Object(s.createElement)("p",{className:"autocomplete-tokenfield__help"},n))}}]),t}(s.Component)),M=function(e){function t(){var e,n;d()(this,t);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return n=m()(this,(e=j()(t)).call.apply(e,[this].concat(c))),S()(w()(n),"state",{showAdvancedFilters:!1}),S()(w()(n),"fetchPostSuggestions",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/search",{search:e,per_page:20,_fields:"id,title",type:"post"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.title)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"fetchSavedPosts",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/posts",{per_page:100,include:e.join(","),_fields:"id,title"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.title.rendered)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"fetchAuthorSuggestions",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/users",{search:e,per_page:20,_fields:"id,name"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no name)","newspack-blocks")}}))}))})),S()(w()(n),"fetchSavedAuthors",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/users",{per_page:100,include:e.join(","),_fields:"id,name"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no name)","newspack-blocks")}}))}))})),S()(w()(n),"fetchCategorySuggestions",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/categories",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"fetchSavedCategories",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/categories",{per_page:100,_fields:"id,name",include:e.join(",")})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"fetchTagSuggestions",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/tags",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"fetchSavedTags",(function(e){return x()({path:Object(A.addQueryArgs)("/wp/v2/tags",{per_page:100,_fields:"id,name",include:e.join(",")})}).then((function(e){return e.map((function(e){return{value:e.id,label:Object(T.decodeEntities)(e.name)||Object(a.__)("(no title)","newspack-blocks")}}))}))})),S()(w()(n),"render",(function(){var e=n.props,t=e.specificMode,o=e.onSpecificModeChange,c=e.specificPosts,r=e.onSpecificPostsChange,i=e.authors,u=e.onAuthorsChange,p=e.categories,f=e.onCategoriesChange,d=e.tags,g=e.onTagsChange,h=e.tagExclusions,b=e.onTagExclusionsChange,m=e.enableSpecific,O=n.state.showAdvancedFilters;return[m&&Object(s.createElement)(l.ToggleControl,{key:"specificMode",checked:t,onChange:o,label:Object(a.__)("Choose Specific Posts","newspack-blocks")}),t&&Object(s.createElement)(I,{key:"posts",tokens:c||[],onChange:r,fetchSuggestions:n.fetchPostSuggestions,fetchSavedInfo:n.fetchSavedPosts,label:Object(a.__)("Posts","newspack-blocks"),help:Object(a.__)("Begin typing post title, click autocomplete result to select.","newspack-blocks")}),!t&&Object(s.createElement)(l.QueryControls,C()({key:"queryControls"},n.props)),!t&&u&&Object(s.createElement)(I,{key:"authors",tokens:i||[],onChange:u,fetchSuggestions:n.fetchAuthorSuggestions,fetchSavedInfo:n.fetchSavedAuthors,label:Object(a.__)("Authors","newspack-blocks")}),!t&&f&&Object(s.createElement)(I,{key:"categories",tokens:p||[],onChange:f,fetchSuggestions:n.fetchCategorySuggestions,fetchSavedInfo:n.fetchSavedCategories,label:Object(a.__)("Categories","newspack-blocks")}),!t&&g&&Object(s.createElement)(I,{key:"tags",tokens:d||[],onChange:g,fetchSuggestions:n.fetchTagSuggestions,fetchSavedInfo:n.fetchSavedTags,label:Object(a.__)("Tags","newspack-blocks")}),!t&&b&&Object(s.createElement)("p",{key:"toggle-advanced-filters"},Object(s.createElement)(l.Button,{isLink:!0,onClick:function(){return n.setState({showAdvancedFilters:!O})}},O?Object(a.__)("Hide Advanced Filters","newspack-blocks"):Object(a.__)("Show Advanced Filters","newspack-blocks"))),!t&&b&&O&&Object(s.createElement)(I,{key:"tag-exclusion",tokens:h||[],onChange:b,fetchSuggestions:n.fetchTagSuggestions,fetchSavedInfo:n.fetchSavedTags,label:Object(a.__)("Excluded Tags","newspack-blocks")})]})),n}return v()(t,e),t}(s.Component);M.defaultProps={enableSpecific:!0,specificPosts:[],authors:[],categories:[],tags:[],tagExclusions:[]};var H,D=M,L=n(10),N=n(16),V=N.name,z={queryBlocks:[],postsByBlock:{},specificPostsByBlock:{}},F={updateBlocks:function(e){return{type:"UPDATE_BLOCKS",blocks:e}},markPostsAsDisplayed:function(e,t){return{type:"MARK_POSTS_DISPLAYED",clientId:e,posts:t}},markSpecificPostsAsDisplayed:function(e,t){return{type:"MARK_SPECIFIC_POSTS_DISPLAYED",clientId:e,posts:t}}},R={previousPostIds:function(e,t){var n,o,c,r=e.queryBlocks,a=e.specificPostsByBlock,i=e.postsByBlock,s=r.filter((function(e){var t=e.clientId;return a[t]})).flatMap((function(e){var t=e.clientId;return a[t].map((function(e){return e.id}))})),l=(n=r,o=t,c=n.findIndex((function(e){return e.clientId===o})),n.slice(0,c)).filter((function(e){var t=e.clientId;return i[t]})).flatMap((function(e){var t=e.clientId;return i[t].map((function(e){return e.id}))}));return Object(B.uniq)(s.concat(l)).sort()}},q=function(){return"object"==typeof window&&window.wpcomGutenberg&&-1===Number(window.wpcomGutenberg.blogPublic)},G=function(e){var t=e.specificMode,n=e.specificPosts;return t&&n&&n.length},Q=n(23),U=n.n(Q),K=n(21),Y=n(8),W=n(24);"object"==typeof window&&window.newspackIsPostSubtitleSupported&&window.newspackIsPostSubtitleSupported.post_subtitle&&(H=!0);var J=Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z"})),X=Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M17 3H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7V5h10v14z"})),Z=Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z"})),$=Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z"})),ee=Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2V4zm6 9l-4 5h12l-3-4-2.03 2.71L10 13zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5zM20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2zm0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2v7zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4v-7z"})),te=function(e){function t(){var e,n;d()(this,t);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return n=m()(this,(e=j()(t)).call.apply(e,[this].concat(c))),S()(w()(n),"renderPost",(function(e){var t=n.props.attributes,o=t.showImage,c=t.imageShape,r=t.mediaPosition,a=t.minHeight,i=t.showCaption,l=t.showExcerpt,u=t.showSubtitle,p=t.showAuthor,f=t.showAvatar,d=t.showDate,g=t.showCategory,h=t.sectionHeader,b={minHeight:"behind"===r&&o&&e.newspack_featured_image_src&&a+"vh",paddingTop:"behind"===r&&o&&e.newspack_featured_image_src&&a/5+"vh"},m=n.titleForPost(e),O=Object(K.__experimentalGetSettings)().formats.date;return Object(s.createElement)("article",{className:e.newspack_featured_image_src?"post-has-image":null,key:e.id,style:b},o&&e.newspack_featured_image_src&&Object(s.createElement)("figure",{className:"post-thumbnail",key:"thumbnail"},Object(s.createElement)("a",{href:"#"},"landscape"===c&&Object(s.createElement)("img",{src:e.newspack_featured_image_src.landscape,alt:""}),"portrait"===c&&Object(s.createElement)("img",{src:e.newspack_featured_image_src.portrait,alt:""}),"square"===c&&Object(s.createElement)("img",{src:e.newspack_featured_image_src.square,alt:""}),"uncropped"===c&&Object(s.createElement)("img",{src:e.newspack_featured_image_src.uncropped,alt:""})),i&&""!==e.newspack_featured_image_caption&&Object(s.createElement)("figcaption",null,e.newspack_featured_image_caption)),Object(s.createElement)("div",{className:"entry-wrapper"},g&&e.newspack_category_info.length&&Object(s.createElement)("div",{className:"cat-links"},Object(s.createElement)("a",{href:"#"},e.newspack_category_info)),Y.RichText.isEmpty(h)?Object(s.createElement)("h2",{className:"entry-title",key:"title"},Object(s.createElement)("a",{href:"#"},m)):Object(s.createElement)("h3",{className:"entry-title",key:"title"},Object(s.createElement)("a",{href:"#"},m)),H&&u&&Object(s.createElement)(s.RawHTML,{key:"subtitle",className:"newspack-post-subtitle newspack-post-subtitle--in-homepage-block"},e.meta.newspack_post_subtitle||""),l&&Object(s.createElement)(s.RawHTML,{key:"excerpt",className:"excerpt-contain"},e.excerpt.rendered),Object(s.createElement)("div",{className:"entry-meta"},p&&f&&n.formatAvatars(e.newspack_author_info),p&&n.formatByline(e.newspack_author_info),d&&Object(s.createElement)("time",{className:"entry-date published",key:"pub-date"},Object(K.dateI18n)(O,e.date_gmt)))))})),S()(w()(n),"titleForPost",(function(e){return e.title?"string"==typeof e.title?Object(T.decodeEntities)(e.title.trim()):"object"==typeof e.title&&e.title.rendered?Object(T.decodeEntities)(e.title.rendered.trim()):void 0:""})),S()(w()(n),"formatAvatars",(function(e){return e.map((function(e){return Object(s.createElement)("span",{className:"avatar author-avatar",key:e.id},Object(s.createElement)("a",{className:"url fn n",href:"#"},Object(s.createElement)(s.RawHTML,null,e.avatar)))}))})),S()(w()(n),"formatByline",(function(e){return Object(s.createElement)("span",{className:"byline"},Object(a._x)("by","post author","full-site-editing")," ",e.reduce((function(t,n,o){return[].concat(p()(t),[Object(s.createElement)("span",{className:"author vcard",key:n.id},Object(s.createElement)("a",{className:"url fn n",href:"#"},n.display_name)),o<e.length-2&&", ",e.length>1&&o===e.length-2&&Object(a._x)(" and ","post author","full-site-editing")])}),[]))})),S()(w()(n),"renderInspectorControls",(function(){var e=n.props,t=e.attributes,o=e.setAttributes,c=e.textColor,r=e.setTextColor,i=t.authors,u=t.specificPosts,p=t.postsToShow,f=t.categories,d=t.columns,g=t.showImage,h=t.showCaption,b=t.imageScale,m=t.mobileStack,O=t.minHeight,j=t.moreButton,y=t.showExcerpt,w=t.showSubtitle,_=t.typeScale,v=t.showDate,k=t.showAuthor,S=t.showAvatar,E=t.showCategory,C=t.postLayout,P=t.mediaPosition,x=t.specificMode,A=t.tags,T=t.tagExclusions,B=[{value:1,label:Object(a.__)("Small","full-site-editing"),shortName:Object(a.__)("S","full-site-editing")},{value:2,label:Object(a.__)("Medium","full-site-editing"),shortName:Object(a.__)("M","full-site-editing")},{value:3,label:Object(a.__)("Large","full-site-editing"),shortName:Object(a.__)("L","full-site-editing")},{value:4,label:Object(a.__)("Extra Large","newspack-blocks"),shortName:Object(a.__)("XL","newspack-blocks")}];return Object(s.createElement)(s.Fragment,null,Object(s.createElement)(l.PanelBody,{title:Object(a.__)("Display Settings","full-site-editing"),initialOpen:!0},p&&Object(s.createElement)(D,{numberOfItems:p,onNumberOfItemsChange:function(e){return o({postsToShow:e})},specificMode:x,onSpecificModeChange:function(e){return o({specificMode:e})},specificPosts:u,onSpecificPostsChange:function(e){return o({specificPosts:e})},authors:i,onAuthorsChange:function(e){return o({authors:e})},categories:f,onCategoriesChange:function(e){return o({categories:e})},tags:A,onTagsChange:function(e){o({tags:e})},tagExclusions:T,onTagExclusionsChange:function(e){return o({tagExclusions:e})}}),"grid"===C&&Object(s.createElement)(l.RangeControl,{label:Object(a.__)("Columns","full-site-editing"),value:d,onChange:function(e){return o({columns:e})},min:2,max:6,required:!0}),!x&&!q()&&Object(s.createElement)(l.ToggleControl,{label:Object(a.__)('Show "More" Button',"full-site-editing"),checked:j,onChange:function(){return o({moreButton:!j})}})),Object(s.createElement)(l.PanelBody,{title:Object(a.__)("Featured Image Settings","full-site-editing")},Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Featured Image","full-site-editing"),checked:g,onChange:function(){return o({showImage:!g})}})),g&&Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Featured Image Caption","full-site-editing"),checked:h,onChange:function(){return o({showCaption:!h})}})),g&&"top"!==P&&"behind"!==P&&Object(s.createElement)(s.Fragment,null,Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Stack on mobile","full-site-editing"),checked:m,onChange:function(){return o({mobileStack:!m})}})),Object(s.createElement)(l.BaseControl,{label:Object(a.__)("Featured Image Size","full-site-editing"),id:"newspackfeatured-image-size"},Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ButtonGroup,{id:"newspackfeatured-image-size","aria-label":Object(a.__)("Featured Image Size","full-site-editing")},B.map((function(e){var t=b===e.value;return Object(s.createElement)(l.Button,{isLarge:!0,isPrimary:t,"aria-pressed":t,"aria-label":e.label,key:e.value,onClick:function(){return o({imageScale:e.value})}},e.shortName)})))))),g&&"behind"===P&&Object(s.createElement)(l.RangeControl,{label:Object(a.__)("Minimum height","full-site-editing"),help:Object(a.__)("Sets a minimum height for the block, using a percentage of the screen's current height.","newspack-blocks"),value:O,onChange:function(e){return o({minHeight:e})},min:0,max:100,required:!0})),Object(s.createElement)(l.PanelBody,{title:Object(a.__)("Post Control Settings","full-site-editing")},H&&Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Subtitle","full-site-editing"),checked:w,onChange:function(){return o({showSubtitle:!w})}})),Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Excerpt","full-site-editing"),checked:y,onChange:function(){return o({showExcerpt:!y})}})),Object(s.createElement)(l.RangeControl,{className:"type-scale-slider",label:Object(a.__)("Type Scale","full-site-editing"),value:_,onChange:function(e){return o({typeScale:e})},min:1,max:10,beforeIcon:"editor-textcolor",afterIcon:"editor-textcolor",required:!0})),Object(s.createElement)(Y.PanelColorSettings,{title:Object(a.__)("Color Settings","full-site-editing"),initialOpen:!0,colorSettings:[{value:c.color,onChange:r,label:Object(a.__)("Text Color","full-site-editing")}]}),Object(s.createElement)(l.PanelBody,{title:Object(a.__)("Post Meta Settings","full-site-editing")},Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Date","full-site-editing"),checked:v,onChange:function(){return o({showDate:!v})}})),Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Category","full-site-editing"),checked:E,onChange:function(){return o({showCategory:!E})}})),Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Author","full-site-editing"),checked:k,onChange:function(){return o({showAuthor:!k})}})),k&&Object(s.createElement)(l.PanelRow,null,Object(s.createElement)(l.ToggleControl,{label:Object(a.__)("Show Author Avatar","full-site-editing"),checked:S,onChange:function(){return o({showAvatar:!S})}}))))})),n}return v()(t,e),h()(t,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.attributes,c=n.className,r=n.clientId,i=n.setAttributes,u=n.isSelected,p=n.latestPosts,f=n.textColor,d=n.markPostsAsDisplayed,g=o.showImage,h=o.imageShape,b=o.postLayout,m=o.mediaPosition,O=o.moreButton,j=o.moreButtonText,y=o.columns,w=o.typeScale,_=o.imageScale,v=o.mobileStack,k=o.sectionHeader,E=o.showCaption,C=o.showCategory,P=o.specificMode,x=U()(c,(e={"is-grid":"grid"===b,"show-image":g},S()(e,"columns-".concat(y),"grid"===b),S()(e,"ts-".concat(w),"5"!==w),S()(e,"image-align".concat(m),g),S()(e,"is-".concat(_),"1"!==_&&g),S()(e,"mobile-stack",v),S()(e,"image-shape".concat(h),"landscape"!==h),S()(e,"has-text-color",""!==f.color),S()(e,"show-caption",E),S()(e,"show-category",C),S()(e,"wpnbha",!0),e)),A=[{icon:"list-view",title:Object(a.__)("List View","full-site-editing"),onClick:function(){return i({postLayout:"list"})},isActive:"list"===b},{icon:"grid-view",title:Object(a.__)("Grid View","full-site-editing"),onClick:function(){return i({postLayout:"grid"})},isActive:"grid"===b}],T=[{icon:"align-none",title:Object(a.__)("Show media on top","full-site-editing"),isActive:"top"===m,onClick:function(){return i({mediaPosition:"top"})}},{icon:"align-pull-left",title:Object(a.__)("Show media on left","full-site-editing"),isActive:"left"===m,onClick:function(){return i({mediaPosition:"left"})}},{icon:"align-pull-right",title:Object(a.__)("Show media on right","full-site-editing"),isActive:"right"===m,onClick:function(){return i({mediaPosition:"right"})}},{icon:ee,title:Object(a.__)("Show media behind","full-site-editing"),isActive:"behind"===m,onClick:function(){return i({mediaPosition:"behind"})}}],B=[{icon:J,title:Object(a.__)("Landscape Image Shape","full-site-editing"),isActive:"landscape"===h,onClick:function(){return i({imageShape:"landscape"})}},{icon:X,title:Object(a.__)("portrait Image Shape","full-site-editing"),isActive:"portrait"===h,onClick:function(){return i({imageShape:"portrait"})}},{icon:Z,title:Object(a.__)("Square Image Shape","full-site-editing"),isActive:"square"===h,onClick:function(){return i({imageShape:"square"})}},{icon:$,title:Object(a.__)("Uncropped","full-site-editing"),isActive:"uncropped"===h,onClick:function(){return i({imageShape:"uncropped"})}}];return d(r,p),Object(s.createElement)(s.Fragment,null,Object(s.createElement)("div",{className:x,style:{color:f.color}},Object(s.createElement)("div",null,p&&(!Y.RichText.isEmpty(k)||u)&&Object(s.createElement)(Y.RichText,{onChange:function(e){return i({sectionHeader:e})},placeholder:Object(a.__)("Write header…","full-site-editing"),value:k,tagName:"h2",className:"article-section-title"}),p&&!p.length&&Object(s.createElement)(l.Placeholder,null,Object(a.__)("Sorry, no posts were found.","full-site-editing")),!p&&Object(s.createElement)(l.Placeholder,{icon:Object(s.createElement)(l.Spinner,null),className:"component-placeholder__align-center"}),p&&p.map((function(e){return t.renderPost(e)})))),!P&&p&&O&&!q()&&Object(s.createElement)("div",{className:"editor-styles-wrapper wpnbha__wp-block-button__wrapper"},Object(s.createElement)("div",{className:"wp-block-button"},Object(s.createElement)(Y.RichText,{placeholder:Object(a.__)("Load more posts","full-site-editing"),value:j,onChange:function(e){return i({moreButtonText:e})},className:"wp-block-button__link",keepPlaceholderOnFocus:!0,allowedFormats:[]}))),Object(s.createElement)(Y.BlockControls,null,Object(s.createElement)(l.Toolbar,{controls:A}),g&&Object(s.createElement)(l.Toolbar,{controls:T}),g&&Object(s.createElement)(l.Toolbar,{controls:B})),Object(s.createElement)(Y.InspectorControls,null,this.renderInspectorControls()))}}]),t}(s.Component),ne=Object(W.compose)([Object(Y.withColors)({textColor:"color"}),Object(L.withSelect)((function(e,t){var n=t.attributes,o=t.clientId,c=function(e){var t=e.postsToShow,n=e.authors,o=e.categories,c=e.tags,r=e.specificPosts,a=e.tagExclusions;return Object(B.pickBy)(G(e)?{include:r,orderby:"include",per_page:r.length}:{per_page:t,categories:o,author:n,tags:c,tags_exclude:a},(function(e){return!Object(B.isUndefined)(e)}))}(n);if(!G(n)){var r=e(V).previousPostIds(o);c.exclude=r.join(",")}return{latestPosts:e("core").getEntityRecords("postType","post",c)}})),Object(L.withDispatch)((function(e,t){var n=t.attributes;return{markPostsAsDisplayed:G(n)?e(V).markSpecificPostsAsDisplayed:e(V).markPostsAsDisplayed}}))])(te),oe=(n(31),n(32),N.name,N.attributes),ce=N.category,re={title:Object(a.__)("Homepage Posts","full-site-editing"),icon:Object(s.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(s.createElement)(l.Path,{d:"M0 0h24v24H0z",fill:"none"}),Object(s.createElement)(l.Path,{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM10 9h8v2h-8zm0 3h4v2h-4zm0-6h8v2h-8z"})),attributes:oe,category:ce,keywords:[Object(a.__)("posts","full-site-editing"),Object(a.__)("articles","full-site-editing"),Object(a.__)("latest","full-site-editing")],description:Object(a.__)("A block for displaying homepage posts.","full-site-editing"),styles:[{name:"default",label:Object(a._x)("Default","block style","full-site-editing"),isDefault:!0},{name:"borders",label:Object(a._x)("Borders","block style","full-site-editing")}],supports:{html:!1,align:["wide","full"],default:""},edit:ne,save:function(){return null},transforms:{from:[{type:"block",blocks:["core/latest-posts"],transform:function(e){var t=e.displayPostContent,n=e.displayPostDate,o=e.postLayout,c=e.columns,a=e.postsToShow,s=e.categories;return Object(r.createBlock)(Object(i.applyFilters)("blocks.transforms_from_name","newspack-blocks/homepage-articles"),{showExcerpt:t,showDate:n,postLayout:o,columns:c,postsToShow:a,showAuthor:!1,categories:s?[s]:[]})}}],to:[{type:"block",blocks:["core/latest-posts"],transform:function(e){var t=e.showExcerpt,n=e.showDate,o=e.postLayout,c=e.columns,a=e.postsToShow,i=e.categories;return Object(r.createBlock)("core/latest-posts",{displayPostContent:t,displayPostDate:n,postLayout:o,columns:c,postsToShow:a,categories:i[0]||""})}}]}},ae="a8c/blog-posts";Object(i.addFilter)("blocks.transforms_from_name","set-transformed-block-name",(function(e){return"newspack-blocks/homepage-articles"!==e?e:ae})),Object(r.registerBlockType)(ae,c()({},re,{title:Object(a.__)("Blog Posts","full-site-editing"),category:"layout"})),function(e){var t=function t(n){return n.flatMap((function(n){var o=[];return n.name===e&&o.push(n),o.concat(t(n.innerBlocks))}))};Object(L.registerStore)(V,{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_BLOCKS":return c()({},e,{queryBlocks:t(n.blocks)});case"MARK_POSTS_DISPLAYED":return c()({},e,{postsByBlock:c()({},e.postsByBlock,S()({},n.clientId,n.posts))});case"MARK_SPECIFIC_POSTS_DISPLAYED":return c()({},e,{specificPostsByBlock:c()({},e.specificPostsByBlock,S()({},n.clientId,n.posts))})}return e},actions:F,selectors:R,initialState:z});var n,o=Object(L.select)("core/block-editor"),r=o.getClientIdsWithDescendants,a=o.getBlocks,i=Object(L.dispatch)(V).updateBlocks;Object(L.subscribe)((function(){var e=r(),t=e!==n;n=e,t&&i(a())}))}(ae)}]));
